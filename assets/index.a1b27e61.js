import{c as e,E as t,a as i,b as o,d as n,e as a,f as r,o as s,g as l,h as d,w as c,i as u,j as p,k as m,l as g,m as f,n as h,p as y,q as x,r as w,s as E,t as _,u as k,v as C,x as b,y as v,z as L,A as $,B as H,V as T}from"./vendor.37bcbcb1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const W=e({state:()=>({token:null,origExp:"",isLoading:!1,ansHistory:[]}),mutations:{setOrigExp(e,t){e.origExp=t},setLoading(e,t){e.isLoading=t},updateAnsHistory(e,t){e.ansHistory.unshift({correctedExp:t.correctedExp,answer:t.answer,index:0});for(let i=1;i<e.ansHistory.length;i++)e.ansHistory[i].index=i},deleteAnsHistory(e,t){e.ansHistory.splice(t,1);for(let i=0;i<e.ansHistory.length;i++)e.ansHistory[i].index=i}}}),S=(e,i)=>{t({showClose:!0,message:e,type:i})};var A=e=>{S(e,"success")},N=e=>{S(e,"error")},O=e=>{S(e,"warning")},V=({title:e,msg:t,ok:o,okText:n})=>{e||(e="提示"),t||(t="错误"),n||(n="确定"),i.alert(t,e,{confirmButtonText:n}).then(o||(()=>{}))},z=({title:e,msg:t,ok:o,okText:n,cancel:a,cText:r})=>{i.confirm(t,e||"提示",{confirmButtonText:n||"确定",cancelButtonText:r||"取消"}).then(o||(()=>{})).catch(a||(()=>{}))},K=()=>{t.closeAll()},U=(e,t)=>{for(const[i,o]of t)e[i]=o;return e};const q={key:0},B={id:"tab-operations"},P={key:1};var j=U({name:"history",props:["window-width"],data:()=>({selected:[]}),computed:{ansHistory(){return this.$store.state.ansHistory}},methods:{handleSelectionChange(e){this.selected=e},delSelected(){if(0===this.selected.length)O("未选中任何结果");else{this.selected.sort((function(e,t){let i=e.index,o=t.index;return i<o?1:i>o?-1:0}));for(let e=0;e<this.selected.length;e++)this.$store.commit("deleteAnsHistory",this.selected[e].index);A("已删除")}},delEle(e){this.$store.commit("deleteAnsHistory",e),A("已删除")},copyEle:function(e){this.$copyText(e).then((function(e){A("复制成功")}),(function(e){N("复制失败")}))}}},[["render",function(e,t,i,h,y,x){const w=o,E=n,_=a,k=r;return 0!==x.ansHistory.length?(s(),l("div",q,[d(_,{data:x.ansHistory,fit:"","highlight-current-row":"",style:{width:"100%"},onKeyup:g(x.delSelected,["delete","native"]),onSelectionChange:x.handleSelectionChange},{default:c((()=>[this.windowWidth>=425?(s(),u(w,{key:0,type:"selection",width:"auto"})):p("",!0),this.windowWidth>=1440||this.windowWidth>=600&&this.windowWidth<993?(s(),u(w,{key:1,prop:"correctedExp",label:"修正表达式",width:"auto"})):p("",!0),d(w,{prop:"answer",fixed:"right",label:"结果",width:"auto"}),d(w,{fixed:"right",label:"操作",width:"auto"},{default:c((e=>[d(E,{circle:"",type:"primary",size:"mini",icon:"el-icon-document-copy",onClick:m((t=>x.copyEle(e.row.answer)),["prevent"])},null,8,["onClick"]),d(E,{circle:"",type:"danger",size:"mini",icon:"el-icon-delete",onClick:m((t=>x.delEle(e.$index)),["prevent"])},null,8,["onClick"])])),_:1})])),_:1},8,["data","onKeyup","onSelectionChange"]),f("div",B,[d(E,{circle:"",type:"danger",disabled:0===y.selected.length,icon:"el-icon-delete",onClick:x.delSelected},null,8,["disabled","onClick"])])])):(s(),l("div",P,[d(k,{description:"输入一个新的表达式开始计算",image:"./assets/img/null.svg"})]))}]]);const I={name:"normal",computed:{origExp:{get(){return this.$store.state.origExp},set(e){W.commit("setOrigExp",e)}},isLoading(){return this.$store.state.isLoading}}},R=e=>(w("data-v-d2ac98ca"),e=e(),E(),e),D=R((()=>f("span",{class:"iconfont el-icon-third-tuige",style:{"vertical-align":"middle"}},null,-1))),J=_("("),G=_(")"),M=_(" x"),F=R((()=>f("sup",null,"2",-1))),Q=_("√"),X=_("7"),Y=_("8"),Z=_("9"),ee=_("÷"),te=_("4"),ie=_("5"),oe=_("6"),ne=_("×"),ae=_("1"),re=_("2"),se=_("3"),le=_("-"),de=_("0"),ce=_("."),ue=_("%"),pe=_("+"),me=_("C"),ge=_("=");var fe=U(I,[["render",function(e,t,i,o,a,r){const u=n,p=h,m=y,f=x;return s(),l("div",null,[d(p,{ref:"input-box",disabled:"",modelValue:r.origExp,"onUpdate:modelValue":t[1]||(t[1]=e=>r.origExp=e),onKeyup:t[2]||(t[2]=g((e=>{this.$emit("calc",{origExp:r.origExp})}),["enter","native"])),autosize:"",type:"text"},{append:c((()=>[d(u,{size:"mini",onClick:t[0]||(t[0]=e=>r.origExp=r.origExp.substring(0,r.origExp.length-1))},{default:c((()=>[D])),_:1})])),_:1},8,["modelValue"]),d(f,{gutter:10},{default:c((()=>[d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[3]||(t[3]=e=>r.origExp+="(")},{default:c((()=>[J])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[4]||(t[4]=e=>r.origExp+=")")},{default:c((()=>[G])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[5]||(t[5]=e=>r.origExp+="^2")},{default:c((()=>[M,F])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[6]||(t[6]=e=>r.origExp+="√")},{default:c((()=>[Q])),_:1})])),_:1})])),_:1}),d(f,{gutter:10},{default:c((()=>[d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[7]||(t[7]=e=>r.origExp+="7")},{default:c((()=>[X])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[8]||(t[8]=e=>r.origExp+="8")},{default:c((()=>[Y])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[9]||(t[9]=e=>r.origExp+="9")},{default:c((()=>[Z])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[10]||(t[10]=e=>r.origExp+="/")},{default:c((()=>[ee])),_:1})])),_:1})])),_:1}),d(f,{gutter:10},{default:c((()=>[d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[11]||(t[11]=e=>r.origExp+="4")},{default:c((()=>[te])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[12]||(t[12]=e=>r.origExp+="5")},{default:c((()=>[ie])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[13]||(t[13]=e=>r.origExp+="6")},{default:c((()=>[oe])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[14]||(t[14]=e=>r.origExp+="*")},{default:c((()=>[ne])),_:1})])),_:1})])),_:1}),d(f,{gutter:10},{default:c((()=>[d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[15]||(t[15]=e=>r.origExp+="1")},{default:c((()=>[ae])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[16]||(t[16]=e=>r.origExp+="2")},{default:c((()=>[re])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[17]||(t[17]=e=>r.origExp+="3")},{default:c((()=>[se])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[18]||(t[18]=e=>r.origExp+="-")},{default:c((()=>[le])),_:1})])),_:1})])),_:1}),d(f,{gutter:10},{default:c((()=>[d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[19]||(t[19]=e=>r.origExp+="0")},{default:c((()=>[de])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[20]||(t[20]=e=>r.origExp+=".")},{default:c((()=>[ce])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[21]||(t[21]=e=>r.origExp+="%")},{default:c((()=>[ue])),_:1})])),_:1}),d(m,{span:6},{default:c((()=>[d(u,{type:"primary",onClick:t[22]||(t[22]=e=>r.origExp+="+")},{default:c((()=>[pe])),_:1})])),_:1})])),_:1}),d(f,{gutter:10},{default:c((()=>[d(m,{span:12},{default:c((()=>[d(u,{type:"warning",onClick:t[23]||(t[23]=e=>r.origExp="")},{default:c((()=>[me])),_:1})])),_:1}),d(m,{span:12},{default:c((()=>[d(u,{type:"success",onClick:t[24]||(t[24]=e=>{this.$emit("calc",{origExp:r.origExp})}),loading:r.isLoading},{default:c((()=>[ge])),_:1},8,["loading"])])),_:1})])),_:1})])}],["__scopeId","data-v-d2ac98ca"]]);const he={name:"keyboard",mounted(){this.$refs["input-box"].focus()},computed:{origExp:{get(){return this.$store.state.origExp},set(e){W.commit("setOrigExp",e)}}}},ye=(e=>(w("data-v-20bc92c0"),e=e(),E(),e))((()=>f("span",{class:"iconfont el-icon-third-calculator",style:{"vertical-align":"middle"}}," 计算 ",-1)));var xe=U(he,[["render",function(e,t,i,o,a,r){const u=n,p=h;return s(),l("div",null,[d(p,{ref:"input-box",modelValue:r.origExp,"onUpdate:modelValue":t[1]||(t[1]=e=>r.origExp=e),onKeyup:t[2]||(t[2]=g((e=>{this.$emit("calc",{origExp:r.origExp})}),["enter","native"])),autosize:"",type:"text",placeholder:"请输入一个表达式......"},{append:c((()=>[d(u,{type:"primary",onClick:t[0]||(t[0]=e=>{this.$emit("calc",{origExp:r.origExp})})},{default:c((()=>[ye])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-20bc92c0"]]);let we=window.location.host;/^localhost+/.test(we)?k.defaults.baseURL="http://localhost:3001":k.defaults.baseURL="https://demo.xn--ftwm9mhr4a.com",k.defaults.headers["Content-Type"]="text/plain",k.defaults.headers["Access-Control-Allow-Origin"]="https://demo.xn--ftwm9mhr4a.com",k.defaults.timeout=3e3,k.defaults.withCredentials=!0,k.interceptors.request.use((e=>(null!==W.state.token&&(e.headers[TOKEN_HEADER]=W.state.token),e)),(e=>Promise.reject(e)));const Ee=e=>{let t=null;e.loading&&(t=Loading.service({lock:!0,text:e.loading,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.6)"})),e.timeout||(e.timeout=0),k({method:e.method,url:e.url,data:e.data}).then((i=>{setTimeout((()=>{if(e.loading&&t.close(),!i)return;const o=i.data;403!==o.code&&500!==o.code&&_e(e.success)&&e.success(o)}),e.timeout)})).catch((i=>{console.log(i),setTimeout((()=>{e.loading&&t.close(),_e(e.error)?e.error(i):V({title:"错误",msg:"请求出错"})}),e.timeout)}))},_e=e=>e&&"function"==typeof e,ke=e=>{e.confirm?z({msg:e.confirm,func:()=>Ee(e)}):Ee(e)};var Ce={get({url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r}){t&&(e=e+"?"+(t=qs.stringify(JSON.parse(JSON.stringify(t))))),ke({method:"GET",url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r})},post({url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r}){ke({method:"POST",url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r})},put({url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r}){ke({method:"PUT",url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r})},delete({url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r}){ke({method:"DELETE",url:e,data:t,loading:i,timeout:o,confirm:n,success:a,error:r})}};const be=H(U({name:"app",data:()=>({mode:"normal",windowWidth:NaN}),methods:{calc(e){this.isLoading=!0;let t="",i="",o=NaN,n={"orig-exp":e.origExp};K(),Ce.post({url:"/process",data:n,loading:!1,timeout:100,confirm:!1,success:e=>{console.log(e),this.isLoading=!1,t=e["error-msg"],i=e["corrected-exp"],o=e.answer,null!==t?(O(`${t}`),this.origExp=""):(this.windowWidth<=992&&A(`计算结果: ${o}`),this.origExp=o.toString(),this.$store.commit("updateAnsHistory",{correctedExp:i,answer:o,index:0}))},error:e=>{this.isLoading=!1,this.origExp="",K(),N(`后端出错: ${e.message}`)}})}},computed:{origExp:{set(e){W.commit("setOrigExp",e)}},isLoading:{get(){return this.$store.state.isLoading},set(e){W.commit("setLoading",e)}}},watch:{windowWidth(e){e>=993&&"history"==this.mode&&(this.mode="normal")}},mounted(){this.windowWidth=window.innerWidth,window.onresize=()=>(()=>{this.windowWidth=window.innerWidth})()},components:{history:j,normal:fe,keyboard:xe}},[["render",function(e,t,i,o,n,a){const r=j,l=C,f=b,h=v,y=fe,x=xe,w=L,E=$;return s(),u(E,{id:"container",onKeyup:t[1]||(t[1]=g(m((t=>e.message.clear()),["exact"]),["esc"]))},{default:c((()=>[d(l,{class:"hidden-sm-and-down",width:"35%"},{default:c((()=>[d(r,{ref:"history","window-width":n.windowWidth},null,8,["window-width"])])),_:1}),d(w,null,{default:c((()=>[d(h,{modelValue:n.mode,"onUpdate:modelValue":t[0]||(t[0]=e=>n.mode=e)},{default:c((()=>[d(f,{label:"标准模式",name:"normal"}),d(f,{label:"键盘模式",name:"keyboard"}),this.windowWidth<=992?(s(),u(f,{key:0,label:"历史记录",name:"history"})):p("",!0)])),_:1},8,["modelValue"]),"normal"===n.mode?(s(),u(y,{key:0,onCalc:a.calc},null,8,["onCalc"])):p("",!0),"keyboard"===n.mode?(s(),u(x,{key:1,onCalc:a.calc},null,8,["onCalc"])):p("",!0),"history"===n.mode?(s(),u(r,{key:2,"window-width":n.windowWidth},null,8,["window-width"])):p("",!0)])),_:1})])),_:1})}]]));be.use(W),be.use(T),be.mount("#app");
